:root {
  --blue-900: #0e2b52;
  --blue-800: #173b6c;
  --blue-100: #e9f0ff;
  --bg: #f6f8fc;
  --text: #1b1f2a;
  --muted: #6b7280;
  --primary: #4c8bf5;
  --danger: #e35168;
  --radius: 14px;
}

* { box-sizing: border-box; }

body {
  margin: 0;
  background: var(--bg);
  color: var(--text);
  font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
}

.shell {
  width: 420px;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
}

/* top bar */
.topbar {
  height: 52px;
  background: linear-gradient(180deg, #eef4ff, #f9fbff 60%);
  border-bottom: 1px solid #e5e7eb;
  display: flex; align-items: center; justify-content: space-between;
  padding: 0 10px 0 12px;
}
.brand { display: flex; align-items: center; gap: 8px; }
.brand-icon { color: var(--primary); font-weight: 800; }
.brand-text { color: var(--blue-800); font-weight: 700; letter-spacing: 0.5px; }
.icon-btn {
  background: transparent; border: 0; font-size: 18px; cursor: pointer; margin-left: 6px;
}

/* drawer */
.drawer {
  position: fixed; inset: 0 auto 0 0;
  width: 260px; transform: translateX(-100%);
  background: var(--blue-900); color: #e7eefc;
  box-shadow: 0 10px 40px rgba(0,0,0,.3);
  transition: transform .25s ease;
  z-index: 50;
  display: flex; flex-direction: column;
}
.drawer.open { transform: translateX(0); }
.drawer-header {
  display: flex; align-items: center; justify-content: space-between;
  padding: 14px 14px 6px 16px;
}
.drawer-title { font-weight: 700; opacity: .95; letter-spacing: .2px; }
.drawer-close { background: transparent; color: #c9d8ff; border: 0; font-size: 18px; cursor: pointer; }
.drawer-nav { padding: 8px; display: grid; gap: 2px; }
.drawer-item {
  height: 40px; display: flex; align-items: center; gap: 12px;
  padding: 0 12px; border-radius: 10px; border: 0; cursor: pointer;
  color: #e7eefc; background: transparent;
}
.drawer-item:hover { background: rgba(255,255,255,.05); }
.drawer-icon { width: 22px; text-align: center; }
.divider { border: 0; border-top: 1px solid rgba(255,255,255,.12); margin: 8px 0; }

/* page area */
.page { flex: 1; display: flex; flex-direction: column; }

/* chat */
.chat-page { display: flex; flex-direction: column; height: calc(100vh - 52px); }
.chat-list { flex: 1; overflow: auto; padding: 12px; display: grid; gap: 8px; }

.bubble-row { display: flex; }
.bubble-row.left { justify-content: flex-start; }
.bubble-row.right { justify-content: flex-end; }

.bubble {
  max-width: 80%;
  padding: 10px 12px;
  border-radius: var(--radius);
  box-shadow: 0 3px 10px rgba(0,0,0,.06);
  line-height: 1.35;
  white-space: pre-wrap;
}
.bubble.bot { background: #ffffff; }
.bubble.user { background: #dbeafe; }
.bubble.masked { background: #eef6ff; border: 1px solid #d7e7ff; }
.masked-label { font-size: 12px; color: var(--muted); margin-bottom: 4px; }
.masked-pre { margin: 0; white-space: pre-wrap; font-family: ui-monospace, SFMono-Regular, Menlo, monospace; }

.error-line { color: #b42318; font-size: 12px; padding: 6px 8px; }
.loading-line { color: var(--muted); font-size: 12px; padding: 6px 8px; }

/* composer */
.composer {
  padding: 10px; border-top: 1px solid #e5e7eb; background: #f9fbff;
  display: grid; gap: 8px;
}
.composer textarea {
  width: 100%; min-height: 90px; resize: vertical; padding: 10px;
  border-radius: 10px; border: 1px solid #dbe2f0; outline: none;
  background: #fff;
}
.composer textarea:focus { border-color: #c7d7ff; box-shadow: 0 0 0 3px rgba(76,139,245,.15); }
.composer-actions { display: flex; gap: 8px; justify-content: flex-end; }
button.primary {
  background: var(--primary); color: #fff; border: 0; border-radius: 10px;
  padding: 10px 14px; cursor: pointer;
}
button.primary:disabled { background: #c9dcff; cursor: not-allowed; }
button.secondary {
  background: #eef2ff; color: var(--blue-800); border: 1px solid #d6e0ff;
  border-radius: 10px; padding: 10px 14px; cursor: pointer;
}
button.danger { background: var(--danger); color: #fff; border: 0; border-radius: 8px; padding: 6px 10px; }

/* saved list */
.saved-page { padding: 12px; display: grid; gap: 10px; }
.search-row { display: flex; justify-content: center; }
.search { width: 100%; padding: 10px 12px; border-radius: 10px; border: 1px solid #dbe2f0; }
.saved-list { display: grid; gap: 8px; }
.saved-item {
  background: #fff; border: 1px solid #e5e7eb; border-radius: 10px;
  padding: 10px; display: grid; gap: 8px;
}
.saved-meta { display: flex; justify-content: space-between; align-items: center; }
.saved-meta .title { font-weight: 600; }
.saved-meta .date { font-size: 12px; color: var(--muted); }
.saved-actions { display: flex; gap: 6px; }

/* settings */
.settings-page { padding: 12px; display: grid; gap: 12px; }
.field { display: grid; gap: 6px; }
.field input {
  padding: 10px 12px; border-radius: 10px; border: 1px solid #dbe2f0;
  background: #fff;
}
